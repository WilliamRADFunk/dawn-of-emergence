<html>

<head>
	<!-- Resets all default browser stylings for a clean slate -->
    <link rel="stylesheet" href="css/reset_author_richard_clark.css">
    <!-- Styles specific to the Encryptor pages -->
    <link rel="stylesheet" href="css/styles.css">
    <!-- WebGL wrapper library -->
	<script src="js/external/three.js"></script>
	<!-- Allows for keyboard listeners -->
	<script src="js/external/threex.keyboardstate.js"></script>
	<script>
		var camera, scene, renderer, WIDTH, HEIGHT, earth, clouds;
		function init()
		{
			WIDTH = window.innerWidth;
			HEIGHT = window.innerHeight;

			scene = new THREE.Scene();
			/*
			scene.add(
				new THREE.Mesh(
					new THREE.SphereGeometry(90, 64, 64), 
					new THREE.MeshBasicMaterial({
						map: THREE.ImageUtils.loadTexture('assets/images/galaxy_starfield.png'),
						minFilter: THREE.LinearFilter,
						side: THREE.BackSide
					})
				)
			);
			*/
			var earthGeometry = new THREE.SphereGeometry(0.5, 32, 32);
			var earthMaterial = new THREE.MeshPhongMaterial();
			earthMaterial.map = THREE.ImageUtils.loadTexture('assets/images/earthmap1k.jpg');
			earthMaterial.map.minFilter = THREE.LinearFilter;
			earthMaterial.bumpMap = THREE.ImageUtils.loadTexture('assets/images/earthbump1k.jpg');
			earthMaterial.bumpMap.minFilter = THREE.LinearFilter;
			earthMaterial.bumpScale = 0.02;
			earthMaterial.specularMap = THREE.ImageUtils.loadTexture('assets/images/earthspec1k.jpg');
			earthMaterial.specularMap.minFilter = THREE.LinearFilter;
			earthMaterial.specular  = new THREE.Color(0xFFFFFF);
			earthMaterial.shininess = 10;
			earth = new THREE.Mesh(earthGeometry, earthMaterial);
			scene.add(earth);

			var geometry   = new THREE.SphereGeometry(0.51, 32, 32);
			var material  = new THREE.MeshPhongMaterial();
			material.map = THREE.ImageUtils.loadTexture('assets/images/earthcloudmap.jpg');
			material.map.minFilter = THREE.LinearFilter;
			material.lightMap = THREE.ImageUtils.loadTexture('assets/images/earthcloudmaptrans.jpg');
			material.lightMap.minFilter = THREE.LinearFilter;
			material.side = THREE.FrontSide;
			material.opacity = 0.5;
			material.transparent = true;
			material.depthWrite = false;
			clouds = new THREE.Mesh(geometry, material);
			earth.add(clouds);

			camera = new THREE.PerspectiveCamera( 45, WIDTH / HEIGHT, 0.01, 1000 );
			camera.position.x = earth.position.x;
			camera.position.y = earth.position.y + 0.7;
			camera.position.z = earth.position.z - 2;
			camera.lookAt( earth.position );

			renderer = new THREE.WebGLRenderer();
			renderer.setClearColor( 0x000000, 0 );
			renderer.setSize( WIDTH, HEIGHT );
			renderer.autoClear = false;

			scene.add(new THREE.AmbientLight(0x333333));
			// Main lightsource -- shadows eliminated
		    var Sun = new THREE.DirectionalLight( 0xFFFFFF, 0.9 );
		    Sun.position.x = earth.position.x - 80;
		    Sun.position.y = earth.position.y + 70;
		    Sun.position.z = earth.position.z - 100;
		    scene.add(Sun);

		    // Contains the 1st POV, and all HUD elements.
			var container = document.getElementById("mainview");
			document.body.appendChild( container );
			container.appendChild( renderer.domElement );

		    render();
		}
		function render()
		{
			earth.rotation.y += 0.0005;
			clouds.rotation.y += 0.001;
			requestAnimationFrame( render );
			renderer.render( scene, camera );
		}
	</script>
</head>

<body>

<div id="container">
	<div id="mainview">
	</div>
</div>

<script>window.onload = init;</script>

<script>
</script>

</body>

</html>
